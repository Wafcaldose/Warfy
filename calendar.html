<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡∏î</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      margin-top: 50px;
    }
    input, button {
      font-size: 18px;
      padding: 10px;
      margin: 10px;
    }
  </style>
</head>
<body>
  <h2>üìÖ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡∏î‡∏´‡∏°‡∏≤‡∏¢</h2>
  <input type="date" id="appointmentDate" />
  <br>
  <button onclick="submitDate()">‡∏™‡πà‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡∏î‡πÄ‡∏Ç‡πâ‡∏≤ LINE</button>

  <script>
    async function main() {
      await liff.init({ liffId: "YOUR_LIFF_ID" });  // ‡πÉ‡∏™‡πà LIFF ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ
    }

    async function submitDate() {
      const date = document.getElementById("appointmentDate").value;
      if (!date) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡πà‡∏≠‡∏ô");
        return;
      }

      const today = new Date();
      const selected = new Date(date);
      const diffTime = selected - today;
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      const diffWeeks = Math.ceil(diffDays / 7);

      const message = `üóìÔ∏è ‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡∏î: ${date}\n‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ${diffDays} ‡∏ß‡∏±‡∏ô (${diffWeeks} ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)`;

      if (liff.isInClient()) {
        liff.sendMessages([{ type: "text", text: message }])
          .then(() => liff.closeWindow())
          .catch(err => alert("‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: " + err));
      } else {
        alert("‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô LINE ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô");
      }
    }

    main();
  </script>
</body>
</html>
